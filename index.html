<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>lc2.js</title>
    <link rel="stylesheet" type="text/css" 
          href="http://spratt.github.com/EasyCSS/minimalist.css" />
  </head>
  <body>
    <h1>lc2.js</h1>
    <h2>By Simon Pratt</h2>
    
    <p>
      A simulator
      of <a href="http://www.cs.utexas.edu/users/fussell/courses/cs310h/simulator/lc2.pdf">the
      LC-2 processor</a> in javascript.
    </p>
    <p>
      <a href="https://github.com/spratt/lc2.js">Source code</a>
      available under <a href="http://opensource.org/licenses/ISC">the
      ISC license</a>
    </p>
    <p>
      To use: open up your browser console, and type:
    
      <pre>
        var lc2 = new LC2;
      </pre>
    </p>
    
    <h2>Classes</h2>
    <dl>
      <dt>Register</dt>
      <dd>
        A 16 bit register.  To assign a value to a
        register <code>reg</code>, evaluate: <code>reg.value = 42</code>.
        To read a value from the same register
        evaluate: <code>reg.value</code>.
      </dd>
    </dl>
    
    <h2>Attributes</h2>
    <dl>
      <dt><code>lc2.debug</code></dt>
      <dd>
        Type: boolean.  Default: false.  If true, log debug information to console.
      </dd>
      <dt><code>lc2.conds</code></dt>
      <dd>
        Type: number.  Default: 0.  Bit 0 is set if the previous result
        was negative.  Bit 1 is set if the previous result was positive.
        Bit 2 is set if the previous result was zero.
      </dd>
      <dt><code>lc2.mem</code></dt>
      <dd>
        Type: array of 2^16 Registers, each initialized to 0.
      </dd>
      <dt><code>lc2.reg</code></dt>
      <dd>
        Type: array of 8 Registers, each initialized to 0.
      </dd>
      <dt><code>lc2.pc</code></dt>
      <dd>
        Type: register.  Default: 0.  This is the program counter for the LC-2 cpu.
      </dd>
    </dl>
    
    <h2>Methods</h2>
    <dl>
      <dt><code>lc2.add(dest_reg,src_reg,imm5_bit,last)</code></dt>
      <dd>
        <p>
          Add the value of the source register <code>src_reg</code> to
          another value and store the result in the destination
          register <code>dest_reg</code>.
        </p>
        <p>
          If the value of <code>imm5_bit</code> is 0,
          interpret <code>last</code> as the number of a register whose
          value is to be added to the source register.
        </p>
        <p>
          If the value of <code>imm5_bit</code> is 1,
          interpret <code>last</code> as a 5-bit immediate value to be added
          to the source register.
        </p>
        <p>
          Examples:
          <pre>
            var lc2 = new LC2;
            lc2.add(0,0,1,10); // reg[0] = reg[0] + 10     = 0  + 10 = 10
            lc2.add(0,0,1,10); // reg[0] = reg[0] + 10     = 10 + 10 = 20
            lc2.add(1,1,1,11); // reg[1] = reg[1] + 11     = 0  + 11 = 11
            lc2.add(1,1,1,11); // reg[1] = reg[1] + 11     = 11 + 11 = 22
            lc2.add(2,0,0,1);  // reg[2] = reg[0] + reg[1] = 20 + 22 = 42
            console.log(lc2.reg[2].value); // 42
          </pre>
        </p>
      </dd>
    </dl>
  </body>
  <script src="lc2.js"></script>
</html>
