<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>LC-2 Assembly Language Documentation</title>
    <link rel="stylesheet" type="text/css"
          href="http://fonts.googleapis.com/css?family=Open+Sans" >
    <link rel="stylesheet" type="text/css" 
          href="http://spratt.github.io/EasyCSS/readabilitysans.css" />
    <link rel="stylesheet" type="text/css" 
          href="./style.css" />
  </head>
  <body>
    <h1>LC-2 Assembly Language Documentation</h1>


    <p>
      <a href="index.html">&lt;- Back to the documentation index</a>
    </p>
    
    <p>
      The assembly language recognized by lc2asm.js is closely modeled
      on the one used in <b>Introduction to Computing Systems: from
      Bits & Gates to C and Beyond</b> by Yale N. Patt and Sanjay
      J. Patel.  Matt Postiff at U Michigan developed
      a <a href="http://www.cs.utexas.edu/users/fussell/courses/cs310h/simulator/lc2.pdf">series
      of notes about the LC-2</a> which may also be of help.
    </p>
    
    <p>
      The LC-2 computer has 16 general purpose registers (R0, R1, ...,
      R16), and 65535 (0xffff) memory locations.  Memory addresses
      0x0000 to 0x0fff are reserved for the Operating System.  0x1000
      to 0x2fff, and 0xd000 to 0xefff are reserved.  0xf000 to 0xfbff
      are reserved for memory mapped I/O.  0xfc00 to 0xffff are
      reserved for Boot ROM.
    </p>
    
    <p>
      Note that the lc2asm.js assembler is not case-sensitive, and
      differs slightly from the original LC-2 assembler presented in
      the above book and notes.  Line labels may optionally be
      followed by a colon.
    </p>
    
    <pre>
STR1:    .STRINGZ "The label on this line is valid."
STR2     .STRINGZ "The label on this line is also valid."
    </pre>
    
    <h2>Trap Vectors</h2>
    <dl>
      <dt><code><b>0x21</b></code></dt>
      <dd>
        Print the ASCII character whose value is in R0 to console
        output.
      </dd>
      <dt><code><b>0x23</b></code></dt>
      <dd>
        Read the value from the keyboard and put it in R0.
      </dd>
      <dt><code><b>0x25</b></code></dt>
      <dd>
        Stop the computer.
      </dd>
    </dl>
    
    <h2>Assembler Directives</h2>
    <dl>
      <dt><code><b>.ORIGIN</b> Loc</code></dt>
      <dd>
        Loc is a memory location which specifies where the next
        instruction should be placed in memory, and following
        instructions should follow this address accordingly.
      </dd>
      <dt><code><b>.FILL</b> Val</code></dt>
      <dd>
        Fill this memory location with Val.
      </dd>
      <dt><code><b>.STRINGZ</b> Str</code></dt>
      <dd>
        Str is a string of length n delimited by double-quotes
        (&quot;).  Fill the next n+1 memory locations with the
        characters of Str, followed by a zero value.
      </dd>
      <dt><code><b>.BLKW</b> N Val</code></dt>
      <dd>
        N is a number of memory locations.  Fills the next N memory
        locations with Val.
      </dd>
      <dt><code><b>.END</b></code></dt>
      <dd>
        This simply signals to the assembler that the code has ended,
        and no following code will be assembled.
      </dd>
    </dl>
    
    <h2>Assembly Macro Instructions</h2>
    <dl>
      <dt><code><b>IN</b></code></dt>
      <dd>
        Read the value from the keyboard and put it in R0.
        Equivalent to <code>TRAP $23</code>.
      </dd>
      <dt><code><b>OUT</b></code></dt>
      <dd>
        Print the ASCII character whose value is in R0 to console
        output.  Equivalent to <code>TRAP $21</code>.
      </dd>
      <dt><code><b>HALT</b></code></dt>
      <dd>
        Stop the computer.
        Requivalent to <code>TRAP $25</code>.
      </dd>
    </dl>
    
    <h2>Assembly CPU Instructions</h2>
    <dl>
      <dt><code><b>ADD</b> Reg_dest, Reg_src1, Reg_src2</code></dt>
      <dd>
        Add the values in Reg_src1 and Reg_src2 and put the result in
        Reg_dest.
      </dd>
      <dt><code><b>ADD</b> Reg_dest, Reg_src1, Val5</code></dt>
      <dd>
        Add the values in Reg_src1 and the 5-bit value Val5, and put
        the result in Reg_dest.
      </dd>
      <dt><code><b>AND</b> Reg_dest, Reg_src1, Reg_src2</code></dt>
      <dd>
        Logically AND the values in Reg_src1 and Reg_src2 and put the
        result in Reg_dest.
      </dd>
      <dt><code><b>AND</b> Reg_dest, Reg_src1, Val5</code></dt>
      <dd>
        Logically AND the values in Reg_src1 and the zero-extended
        5-bit value Val5, and put the result in Reg_dest.
      </dd>
    </dl>
  </body>
</html>
